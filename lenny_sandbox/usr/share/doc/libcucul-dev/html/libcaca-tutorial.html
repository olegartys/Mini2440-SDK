<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <title>libcaca documentation</title>
    <link href="doxygen.css" rel="stylesheet" type="text/css">
  </head>
  <body>
<!-- $Id$ -->
<!-- Generated by Doxygen 1.5.6 -->
<div class="contents">
<h1><a class="anchor" name="libcaca-tutorial">A libcucul and libcaca tutorial </a></h1>Before writing your first libcaca application, you need to know the difference between libcucul and libcaca :<ul>
<li>libcucul is the text rendering library. It will do all the work you actually need. From imports (text, ANSI, caca internal format, all of this supporting n-bytes unicode), to exports (sames formats, adding SVG, PostScript, TGA, HTML (both 3 and 4), IRC), it'll cover all your needs.</li><li>libcaca handle everything that can be hardware related. It includes display (RAW, X11, OpenGL, Windows (native console), DOS (conio), ncurses, slang, text VGA (IMB-Compatible)), keyboard (same drivers but RAW), mouse (same drivers but RAW and VGA), time and resize events (on windowed drivers).</li></ul>
<p>
So, you can write a libcucul only program, but you <b>can't</b> write a libcaca only program, it'll be nonsense. Period.<p>
First, a working program, very simple, to check you can compile and run it:<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;<a class="code" href="cucul_8h.html" title="The libcucul public header.">cucul.h</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="caca_8h.html" title="The libcaca public header.">caca.h</a>&gt;</span>

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
{
    <span class="comment">/* Initialise libcaca */</span>
    <a class="code" href="cucul_8h.html#0e7a267dbc21f942cc730fecb0f7e095">cucul_canvas_t</a> *cv; <a class="code" href="caca_8h.html#da5af7a20f3e2f6c103078181b07393e">caca_display_t</a> *dp; <a class="code" href="structcaca__event.html" title="Handling of user events.">caca_event_t</a> ev;
    dp = <a class="code" href="group__libcaca.html#g6128232026056ca5cd5905a745e9aaed" title="Attach a caca graphical context to a cucul canvas.">caca_create_display</a>(NULL);
    <span class="keywordflow">if</span>(!dp) <span class="keywordflow">return</span> 1;
    cv = <a class="code" href="group__libcaca.html#ge7c9d6ddf41479f28989c935f614e452" title="Get the canvas attached to a caca graphical context.">caca_get_canvas</a>(dp);
    <span class="comment">/* Set window title */</span>
    <a class="code" href="group__libcaca.html#gdab2bf1e8d0bf5c3cfb3e29ab07d5641" title="Set the display title.">caca_set_display_title</a>(dp, <span class="stringliteral">"Hello!"</span>);
    <span class="comment">/* Choose drawing colours */</span>
    <a class="code" href="group__cucul__canvas.html#gd83c1d480f332db6db3ad249c5cb1749" title="Set the default colour pair for text (ANSI version).">cucul_set_color_ansi</a>(cv, <a class="code" href="group__cucul__attr.html#g8fbf26bd44f54caff1b1e22e7696ccd2">CUCUL_BLACK</a>, <a class="code" href="group__cucul__attr.html#gce094d8bd1322912079b2d49351d83e9">CUCUL_WHITE</a>);
    <span class="comment">/* Draw a string at coordinates (0, 0) */</span>
    <a class="code" href="group__cucul__canvas.html#g722bd931689996265b368d42af0bef1f" title="Print a string.">cucul_put_str</a>(cv, 0, 0, <span class="stringliteral">"This is a message"</span>);
    <span class="comment">/* Refresh display */</span>
    <a class="code" href="group__libcaca.html#g8c710eac721d05d807491a1534d1cbe7" title="Flush pending changes and redraw the screen.">caca_refresh_display</a>(dp);
    <span class="comment">/* Wait for a key press event */</span>
    <a class="code" href="group__caca__event.html#g98e74dedbe1629c0fc9460761696e050" title="Get the next mouse or keyboard input event.">caca_get_event</a>(dp, <a class="code" href="caca_8h.html#40754185ca237fc44a95357afba34aeab1da825755a2ac3593cca73721b77e22">CACA_EVENT_KEY_PRESS</a>, &amp;ev, -1);
    <span class="comment">/* Clean up library */</span>
    <a class="code" href="group__libcaca.html#gc1b5b4540a500dd59eaa673d784fab1f" title="Detach a caca graphical context from a cucul backend context.">caca_free_display</a>(dp);

    <span class="keywordflow">return</span> 0;
}
</pre></div><p>
What does it do ? (we skip variable definitions, guessing you have a brain) :<ul>
<li>Create a cucul canvas. A canvas is where everything happens. Writing characters, sprites, strings, images, everything. It is mandatory and is the reason of libcuculs' beeing. Size is there a width of 0 pixels, and a height of 0 pixels. It'll be resized according to contents you put in it.</li></ul>
<p>
<ul>
<li>Create a caca display. This is basically the window. Physically it can be a window (most of the displays), a console (ncurses, slang) or a real display (VGA).</li></ul>
<p>
<ul>
<li>Set the window name of our display (only available in windowed displays, does nothing otherwise). (so this is libcaca related)</li></ul>
<p>
<ul>
<li>Set current colors to black background, and white foreground of our canvas (so this is libcucul related)</li></ul>
<p>
<ul>
<li>Put a string "This is a message" with current colors in our libcucul canvas.</li></ul>
<p>
<ul>
<li>Refresh our caca display, whish was firstly attached to our canvas</li></ul>
<p>
<ul>
<li>Wait for an event of type "CACA_EVENT_KEY_PRESS", which seems obvious.</li></ul>
<p>
<ul>
<li>Free display (release memory)</li></ul>
<p>
<ul>
<li>Free canvas (release memory and close window if any)</li></ul>
<p>
You can then compile this code under UNIX-like systems with following command : (you'll need pkg-config and gcc) <div class="fragment"><pre class="fragment">gcc `pkg-config --libs --cflags cucul caca` example.c -o example
</pre></div> </div>
<!-- $Id$ -->
  </body>
</html>
